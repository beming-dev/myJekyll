---
layout: post
category: about블로그
thumbnail: Blog.png
tags: [blog, jekyll, html, css, SEO, github pages]
typora-copy-images-to: ..\assets\images\post
typora-root-url: ..
---

오늘 지하철을 타고 집에 오면서 내가 썼던 글들을 읽어봤는데 글을 너무 못썼다.. 이런식으로 블로그에 글을 쓰는건 처음이라 아직 많이 어색해서 그런 것 같다. 누가 볼 지 모르니 앞으로는 좀 더 신경써서 글을 써야겠다.

오늘은 블로그를 좀 더 업데이트 했다.

# github pages css update문제

전에 css파일을 수정하고 commit하면 업데이트에 10분 이상이 걸려서 불편하다고 한 적이 있다.

구글링 해본 결과, 이 문제는 캐시가 업데이트 되지 않아서 생긴 문제였다. 따라서 캐시를 새로받아오는 강력한 새로고침을 하면 css파일도 빨리 업데이트 할 수 있다.

강력한 새로고침은 크롬기준 crtl + f5 또는 브라우저의 새로고침 버튼을 우클릭하면 나오는 강력 새로고침을 누르면 된다.

# 태그 사용

태그를 사용하는 것은 생각보다 너무 쉬웠다. 각 post의 머릿말에 쓰고 싶은 태그를 배열로 써 놓으면 된다.

ex)\_posts/2021-03-27-블로그 업데이트2.md

```
---
tags: [Raspberry pi, Ubuntu server, ssh]
---
```

그 다음 post에 적용하는 layout에서(여기서는 \_layouts/post.html)

```
{%raw%}
{%if page.tags%}
    {%for tag in page.tags%}
    	<span class="tag">#{{tag}}</span>
    {%endfor%}
{%endif%}
{%endraw%}
```

이런식으로 접근하면 된다.

# 다음 글, 이전 글 기능

처음에는 post 머리말에 다음글과 이전글 link를 변수로 넣고 사용해야 하나 했는데 그럴 필요가 없었다. Jekyll page 변수에 미리 page.previous.url, page.next.url이 정의되어있기 때문이다. Jekyll은 정말 블로그에 필요한 기능은 다 들어있는것 같다.

```
{%raw%}
{% if page.previous.url %}
  <a class="prev" href="{{page.previous.url}}">
  	&laquo; {{page.previous.title}}(이전글)
  </a>
  {% endif %} {% if page.next.url %}
  <a class="next" href="{{page.next.url}}">
  	(다음글){{page.next.title}} &raquo;
  </a>
{% endif %}
{%endraw%}
```

그냥 이런식으로 사용하면 된다.

# 검색 엔진 최적화(SEO)

구글에서 내 블로그가 검색되게 하려면 google search-console에 sitemap이라는 걸 등록해야 한다. 방법은 별로 어렵지 않다.

1. root디렉토리에 robots.txt생성 후 아래코드 복붙

   ```
   User-agent: *
   Allow: /
   Disallow: /assets

   Sitemap: http://beming-dev.github.io/sitemap.xml
   ```

   robots.txt는 크롤러가 웹페이지를 수집할 수 있도록 허용하는 국제 권고안이다. 크롤러의 접근 범위를 제어하고 sitemap의 위치를 알려준다.

   User-agent는 허용할 검색엔진의 로봇 이름, Allow, Disallow는 각각 허용할 페이지, Sitemap은 sitemap파일 주소이다.

2. root디렉토리에 sitemap.xml생성한 후 아래코드 복붙

   ```
   ---
   layout: null
   ---
   {%raw%}
   <?xml version="1.0" encoding="UTF-8"?>
   <urlset xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd"
           xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
       {% for post in site.posts %}
       <url>
           <loc>{{ site.url }}{{ post.url }}.html</loc>
           {% if post.lastmod == null %}
           <lastmod>{{ post.date | date_to_xmlschema }}</lastmod>
           {% else %}
           <lastmod>{{ post.lastmod | date_to_xmlschema }}</lastmod>
           {% endif %}

           {% if post.sitemap.changefreq == null %}
           <changefreq>weekly</changefreq>
           {% else %}
           <changefreq>{{ post.sitemap.changefreq }}</changefreq>
           {% endif %}

           {% if post.sitemap.priority == null %}
           <priority>0.5</priority>
           {% else %}
           <priority>{{ post.sitemap.priority }}</priority>
           {% endif %}

       </url>
       {% endfor %}
   </urlset>
   {%endraw%}
   ```

   sitemap.xml에는 크롤러한테 전달할 내용을 담는다. 크롤러에게 URL을 전달해줘서 크롤링을 좀 더 효율적으로 할 수 있게 해준다. 원한다면 마지막으로 업데이트 된 시점, 업데이트 된 빈도수 등등의 메타데이터도 전달할 수 있다.

3. 이제 google search-console에 내 sitemap주소를 알려줘야 한다.

   <https://search.google.com/search-console/welcome?utm_source=about-page>

- 들어가서 URL 접두어 부분에 내 블로그의 루트 URL을 적는다.

![1](/assets/images/post/1.png)

- 그러면 소유권을 확인하는 부분이 나오는데, 나오는 html파일을 root디렉토리에 넣어주면 된다.
- 이제 왼쪽 햄버거 바를 누르고 맨 위의 속성 검색을 누르면 블로그 주소가 나온다.

![2](/assets/images/post/2.png)

- 클릭해서 들어간 후 다시 햄버거 바를 누르고 sitemaps에 들어가면 아래와 같은 화면이 뜨는데, 사이트맵 URL입력에 sitemap.xml을 입력하고 제출하면 된다.

![3](/assets/images/post/3.png)

# 이미지 관리

처음에는 이미지를 일일이 프로젝트로 옮기고 markdown파일에서 이미지 경로를 바꿔줘야 해서 이미지를 추가하는데 시간이 엄청 들었다. 이렇게 불편한 걸 간단하게 해주는게 없진 않을 것 같아서 찾아본 결과 Typora의 엄청난 기능을 발견했다. 참고로 Typora는 내가 쓰고 있는 markdown편집기이다. 내가 사용한 Typora의 기능은 2가지이다.

1. Drag & Drop하면 지정한 경로에 자동 복사

   아래와 같이 들어가서 이미지를 복사할 경로를 설정하면 된다.

   ![화면 캡처 2021-03-27 120857](/assets/images/post/화면 캡처 2021-03-27 120857.png)

2. 이미지의 root경로 설정

   아래와 같이 들어간 다음 블로그 프로젝트의 root 디렉토리를 설정해주면 된다.

   ![화면 캡처 2021-03-27 121258](/assets/images/post/화면 캡처 2021-03-27 121258.png)

이렇게만 설정해주면 이제 local에서 이미지를 Drag & Drop만 따로 만질 필요가 없다.

추가로 이미지의 size를 바꾸고 싶으면 post에 적용되는 css파일에 들어간다음 width:100%같은 속성을 주면 된다. 단, 모든 이미지에 적용되므로, 사이즈 조절이 필요한 이미지는 img태그를 쓰고 style속성을 각각 줘야한다.

---

이제 블로그 만들기가 얼추 끝난것 같다. 추가로 할만한건 목차에 따라 글 위치를 옮겨주는 건데, 그것도 그렇게 오래 걸릴 것 같진 않다. 자바스크립트로 비내리는 효과라던가 좀 더 예쁘게 꾸미고 싶긴 한데 예쁘게 꾸밀 자신이 없다..
